# Decisions: InnerHTML Migration
**File:** `landing/index.html`
**Date:** 2026-02-18

## Decisions

### 1. `contentDiv.innerHTML = marked.parse(text);` (Line ~777)
- **Status**: **Kept** (documented exception).
- **Rationale**: The content comes from a local trusted source (`../src/docs/TORCH.md`) and must be rendered as HTML (Markdown). Without adding a sanitization library (forbidden), `innerHTML` is the only way to render the parsed markdown.
- **Action**: Add comment explaining trusted source. Open issue if necessary (as per prompt instructions for unmigratable items).

### 2. `contentDiv.innerHTML = error message` (Line ~781)
- **Status**: **Migrate**.
- **Strategy**: Replace with `document.createElement('p')`.
- **Implementation**:
  ```javascript
  const p = document.createElement('p');
  p.className = 'text-danger';
  p.textContent = `Error loading documentation: ${error.message}`;
  contentDiv.replaceChildren(p);
  ```

### 3. `btn.innerHTML` save/restore (Line ~829, ~834)
- **Status**: **Migrate**.
- **Strategy**: Capture child nodes instead of HTML string.
- **Implementation**:
  ```javascript
  // Capture
  const originalChildren = Array.from(btn.childNodes).map(n => n.cloneNode(true));

  // Restore
  btn.replaceChildren(...originalChildren);
  ```

## Baseline Update Note
The script `scripts/check-innerhtml.mjs` does not support updating a baseline object or `--update` flag. I will verify the count reduction via the report output manually.
