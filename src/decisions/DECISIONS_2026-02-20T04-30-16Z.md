# Decisions

## Decision 1
- Decision: Hard-block known public relay hosts and block non-local hosts unless explicit dedicated-test acknowledgement is provided.
- Rationale: Prevent accidental load against production/public relays.
- Consequence: Dedicated non-local test relays require `ALLOW_DEDICATED_TEST_RELAY=1` and `RELAY_SAFETY_ACK=LOAD_TEST_INFRA_CONFIRMED`.

## Decision 2
- Decision: Use existing repository event patterns (`kind: 1` view-style events and `kind: 30078` app-data events) for mixed traffic simulation.
- Rationale: Avoid introducing unverified custom protocol/event schemas.
- Consequence: Multipart metadata is represented as app-data payload segments tied to existing Nostr event envelopes.

## Decision 3
- Decision: Implement bounded in-flight pipeline with drop-on-overflow accounting.
- Rationale: Ensure backpressure visibility and avoid unbounded promise growth.
- Consequence: Report now surfaces `backpressureDrops` as an explicit bottleneck signal.
