# Decisions - Decompose Agent

## File Decomposition
**File:** `scripts/agent/run-scheduler-cycle.mjs`

### Why this file?
It was the largest JavaScript source file in the repository (1160 lines) that handles complex orchestration logic. Decomposing it improves readability, testability, and maintainability of the core scheduler loop.

### What was extracted?
1. **`scheduler-config.mjs`**: Encapsulates configuration loading, argument parsing, and environment overrides.
2. **`scheduler-logger.mjs`**: Handles structured logging, failure categorization, and run summaries.
3. **`scheduler-state.mjs`**: Manages persistent run state (lock deferrals, idempotency keys).

### Results
- **Before:** 1160 lines
- **After:** 827 lines
- **Reduction:** 333 lines (> 200 lines target)

### Verification
- `npm run lint` passed.
- `node scripts/agent/run-scheduler-cycle.mjs --help` confirmed basic module wiring works.
