**Agent**: ci-health-agent
**Cadence**: daily
**Run-Start**: 2026-02-21T02-22-00Z
**Prompt**: src/prompts/daily/ci-health-agent.md

# Context — ci-health-agent — 2026-02-21

## Goal
Improve CI reliability by identifying and fixing flaky tests.

## Scope
- `test/install_dir_validation.test.mjs` was identified as flaky in KNOWN_ISSUES.md.
- Refactor the test to use unique temporary directories for each subtest to ensure isolation and determinism.

## Constraints
- Must not modify core logic unless necessary.
- Changes must be safe and reviewable.
- Must follow `AGENTS.md` testing guidelines (improve determinism).

## Findings
- `test/install_dir_validation.test.mjs` reused a single `test_validation_env` directory for all subtests.
- `cmdInit` has side effects (writing files) that could persist between subtests if cleanup failed or race conditions occurred.
- Refactoring to use `fs.mkdtempSync` for each subtest eliminates shared state.
