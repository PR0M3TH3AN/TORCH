---
agent: race-condition-agent
cadence: weekly
run-start: 2026-02-15T15:22:42Z
prompt: src/prompts/weekly/race-condition-agent.md
---
Command: node --test test/lib.test.mjs
Result:
TAP version 13
# Subtest: src/lib.mjs
    # Subtest: cmdCheck
        # Subtest: returns correct structure with empty locks
        ok 1 - returns correct structure with empty locks
        # Subtest: identifies locked agents
        ok 2 - identifies locked agents
        # Subtest: excludes paused agents
        ok 3 - excludes paused agents
        # Subtest: identifies unknown locked agents
        ok 4 - identifies unknown locked agents
        1..4
    ok 1 - cmdCheck
    # Subtest: cmdLock
        # Subtest: successfully locks an available agent
        ok 1 - successfully locks an available agent
        # Subtest: fails if agent is not in roster
        ok 2 - fails if agent is not in roster
        # Subtest: fails if agent is already locked
        ok 3 - fails if agent is already locked
        # Subtest: fails if agent is already completed
        ok 4 - fails if agent is already completed
        # Subtest: fails if race check is lost
        ok 5 - fails if race check is lost
        # Subtest: handles race condition with identical timestamps using eventId tie-breaker (we win)
        ok 6 - handles race condition with identical timestamps using eventId tie-breaker (we win)
        # Subtest: handles race condition with identical timestamps using eventId tie-breaker (we lose)
        ok 7 - handles race condition with identical timestamps using eventId tie-breaker (we lose)
        # Subtest: dry run does not publish
        ok 8 - dry run does not publish
        1..8
    ok 2 - cmdLock
    # Subtest: cmdList
        # Subtest: lists active locks
        ok 1 - lists active locks
        # Subtest: warns about unknown agents
        ok 2 - warns about unknown agents
        # Subtest: handles no locks
        ok 3 - handles no locks
        1..3
    ok 3 - cmdList
    # Subtest: cmdComplete
        # Subtest: successfully completes an active lock
        ok 1 - successfully completes an active lock
        # Subtest: fails if no active lock found
        ok 2 - fails if no active lock found
        # Subtest: detects already completed task
        ok 3 - detects already completed task
        1..3
    ok 4 - cmdComplete
    1..4
ok 1 - src/lib.mjs
1..1
# tests 18
# pass 18
# not-passed 0
