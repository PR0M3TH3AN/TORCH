{
  "parseArgs should parse basic command": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse agent and cadence": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse equals sign syntax": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse dry-run flag": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse port with default": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse custom port": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse ignore-logs flag": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse memory flags": {
    "pass": 5,
    "fail": 0
  },
  "parseArgs should parse memory flags with equals": {
    "pass": 5,
    "fail": 0
  },
  "src/lib.mjs": {
    "pass": 5,
    "fail": 0
  },
  "ci-resilience lock acquisition under unstable relays": {
    "pass": 5,
    "fail": 0
  },
  "publishLock retry behavior": {
    "pass": 5,
    "fail": 0
  },
  "lock-ops": {
    "pass": 5,
    "fail": 0
  },
  "listMemories, inspectMemory, pinMemory, and unpinMemory support admin hooks": {
    "pass": 5,
    "fail": 0
  },
  "triggerPruneDryRun returns candidate metadata without deleting records": {
    "pass": 5,
    "fail": 0
  },
  "memoryStats reports counts/rates and retrieval telemetry remains redaction-safe": {
    "pass": 5,
    "fail": 0
  },
  "runPruneCycle respects prune feature-flag modes": {
    "pass": 5,
    "fail": 0
  },
  "stores runtime events in signer/session namespace and clears scope": {
    "pass": 5,
    "fail": 0
  },
  "expires runtime events and records expiration metrics": {
    "pass": 5,
    "fail": 0
  },
  "enforces LRU bounds and tracks eviction metrics": {
    "pass": 5,
    "fail": 0
  },
  "blocks decrypted/session-sensitive data from durable promotion without sanitizer pass": {
    "pass": 5,
    "fail": 0
  },
  "createEmbedderAdapter selects in-memory backend and supports vector CRUD": {
    "pass": 5,
    "fail": 0
  },
  "createEmbedderAdapter reads backend from environment": {
    "pass": 5,
    "fail": 0
  },
  "memory feature flags parse defaults and canary allow-lists": {
    "pass": 5,
    "fail": 0
  },
  "memory prune flag supports off, dry-run, and active modes": {
    "pass": 5,
    "fail": 0
  },
  "ingestMemoryWindow gathers sources, redacts pii, chunks, embeds, links, and emits telemetry": {
    "pass": 5,
    "fail": 0
  },
  "ingestMemoryWindow dedupes overlapping windows by hashed content + agent + timestamp bucket": {
    "pass": 5,
    "fail": 0
  },
  "createLifecyclePlan respects delete safety constraints and logs reasons": {
    "pass": 5,
    "fail": 0
  },
  "createLifecyclePlan condenses near-duplicates and archives merged source records": {
    "pass": 5,
    "fail": 0
  },
  "applyLifecycleActions executes keep/archive/delete and merge markers": {
    "pass": 5,
    "fail": 0
  },
  "filterAndRankMemories applies metadata filters and composite score": {
    "pass": 5,
    "fail": 0
  },
  "formatMemoriesForPrompt returns prompt blocks and enforces token budget trimming": {
    "pass": 5,
    "fail": 0
  },
  "isMemoryRetrievalEnabled supports global toggle and agent canary list": {
    "pass": 5,
    "fail": 0
  },
  "renderPromptWithMemoryContext injects bounded memory block before base prompt": {
    "pass": 5,
    "fail": 0
  },
  "createDbAdvisoryLockProvider acquires and releases postgres advisory locks": {
    "pass": 5,
    "fail": 0
  },
  "startMemoryMaintenanceScheduler runs all jobs and emits metrics including retries": {
    "pass": 5,
    "fail": 0
  },
  "startMemoryMaintenanceScheduler skips jobs when feature flags disable memory": {
    "pass": 5,
    "fail": 0
  },
  "normalizeMemoryItem applies durable schema defaults and coercions": {
    "pass": 5,
    "fail": 0
  },
  "validateMemoryItem reports field-level errors": {
    "pass": 5,
    "fail": 0
  },
  "ingestEvents rejects invalid writes and logs structured validation details": {
    "pass": 5,
    "fail": 0
  },
  "loadMemoryPromptTemplates loads all memory prompt templates from disk": {
    "pass": 5,
    "fail": 0
  },
  "summarizeEvents retries with repair prompt when first response is malformed JSON": {
    "pass": 5,
    "fail": 0
  },
  "summarizeEvents falls back to deterministic minimal summary with conservative importance when parsing fails twice": {
    "pass": 5,
    "fail": 0
  },
  "CLI Smoke Test": {
    "pass": 5,
    "fail": 0
  },
  "cmdInit creates directory structure and files": {
    "pass": 5,
    "fail": 0
  },
  "cmdInit fails if directory exists without force": {
    "pass": 5,
    "fail": 0
  },
  "cmdUpdate preserves modified prompt": {
    "pass": 5,
    "fail": 0
  },
  "cmdUpdate overwrites prompt with force": {
    "pass": 5,
    "fail": 0
  },
  "cmdUpdate creates backup": {
    "pass": 5,
    "fail": 0
  },
  "torch-lock check respects local roster": {
    "pass": 5,
    "fail": 0
  },
  "cmdInit creates torch-config.json with random namespace": {
    "pass": 5,
    "fail": 0
  },
  "relay fanout quorum integration": {
    "pass": 5,
    "fail": 0
  },
  "raises all-relays-down duration alert after threshold": {
    "pass": 5,
    "fail": 0
  },
  "raises success-rate alert when rolling health falls below threshold": {
    "pass": 5,
    "fail": 0
  },
  "fails required memory policy when retrieval/storage evidence is missing": {
    "pass": 5,
    "fail": 0
  },
  "accepts required memory policy when markers or artifacts are produced": {
    "pass": 5,
    "fail": 0
  },
  "records backend failure metadata when lock command exits with code 2": {
    "pass": 5,
    "fail": 0
  },
  "defers backend failures in non-strict mode and reuses idempotency key on successful retry": {
    "pass": 5,
    "fail": 0
  },
  "fails after exceeding non-strict deferral budget": {
    "pass": 5,
    "fail": 0
  },
  "strict lock mode fails immediately without deferral": {
    "pass": 5,
    "fail": 0
  },
  "skips lock health preflight by default when not enabled": {
    "pass": 5,
    "fail": 0
  },
  "fails scheduler with preflight metadata when lock health preflight is enabled": {
    "pass": 5,
    "fail": 0
  },
  "categorizes unreadable prompt files as prompt_parse_error": {
    "pass": 5,
    "fail": 0
  },
  "categorizes invalid prompt schema as prompt_schema_error": {
    "pass": 5,
    "fail": 0
  },
  "categorizes handoff runtime failures as execution_error": {
    "pass": 5,
    "fail": 0
  },
  "retries lock acquisition for backend error and succeeds on a later attempt": {
    "pass": 5,
    "fail": 0
  },
  "stops retrying after configured lock backend retries are exhausted": {
    "pass": 5,
    "fail": 0
  },
  "does not use backend retry flow for exit code 3 lock conflicts": {
    "pass": 5,
    "fail": 0
  },
  "runs selected scheduler prompt through configured runner command": {
    "pass": 5,
    "fail": 0
  },
  "propagates non-zero runner exit code": {
    "pass": 5,
    "fail": 0
  },
  "scheduler lock backend failure artifact matches required frontmatter schema": {
    "pass": 5,
    "fail": 0
  },
  "schema contract catches missing required lock-backend field": {
    "pass": 5,
    "fail": 0
  },
  "schema contract catches misnamed lock-backend key": {
    "pass": 5,
    "fail": 0
  },
  "lock preflight e2e: successful lock writes completed status snapshot": {
    "pass": 5,
    "fail": 0
  },
  "lock preflight e2e: exit code 2 quorum failure persists failed backend status and prompt-not-started marker": {
    "pass": 5,
    "fail": 0
  },
  "lock preflight e2e: non-lock failure exits failed without prompt parse/schema classification": {
    "pass": 5,
    "fail": 0
  },
  "Scheduler Ratchet Logic (Log Checking)": {
    "pass": 5,
    "fail": 0
  },
  "Scheduler cycle ordering guarantees": {
    "pass": 5,
    "fail": 0
  },
  "summarizes recent lock reliability by platform/cadence/backend/relay": {
    "pass": 5,
    "fail": 0
  },
  "loadTorchConfig (Unit Tests with Mocked FS)": {
    "pass": 5,
    "fail": 0
  },
  "torch-config": {
    "pass": 5,
    "fail": 0
  },
  "Date Utilities": {
    "pass": 5,
    "fail": 0
  },
  "passes when artifacts include metadata and failure IDs map to unresolved known issue entries": {
    "pass": 5,
    "fail": 0
  },
  "fails when required metadata is missing from artifacts": {
    "pass": 5,
    "fail": 0
  },
  "fails when failure identifiers are not cross-linked to known issues or incidents": {
    "pass": 5,
    "fail": 0
  },
  "schema validation covers required fields, coercion, and rejection paths": {
    "pass": 5,
    "fail": 0
  },
  "summarizer parser accepts valid json and recovers after malformed json response": {
    "pass": 5,
    "fail": 0
  },
  "ingest integration persists memory records and links embeddings from event batches": {
    "pass": 5,
    "fail": 0
  },
  "retrieval ranking blends semantic, importance, and recency signals": {
    "pass": 5,
    "fail": 0
  },
  "pruner policy protects pins, merges duplicates, and picks archive/delete outcomes": {
    "pass": 5,
    "fail": 0
  },
  "scheduler smoke test handles mocked clock and lock contention": {
    "pass": 5,
    "fail": 0
  }
}